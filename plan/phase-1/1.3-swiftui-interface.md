# 1.3 SwiftUI Interface (Basic)

**Objective:** Build a simple UI to add/remove domains and toggle blocking.

## UI Requirements

- Text field to add a domain
- List of blocked domains
- Buttons: `Start Block` and `Stop Block`
- Clean, minimal design

## Implementation Steps

### Step 1: Create BlockItem Model

Create the data model in `Models/BlockItem.swift`:

```swift
import Foundation

struct BlockItem: Identifiable, Codable {
    let id: UUID
    var domain: String
    var isEnabled: Bool

    init(id: UUID = UUID(), domain: String, isEnabled: Bool = true) {
        self.id = id
        self.domain = domain
        self.isEnabled = isEnabled
    }
}
```

### Step 2: Create BlockListManager (Observable)

Create `Services/BlockListManager.swift`:

```swift
import Foundation

class BlockListManager: ObservableObject {
    @Published var blockedItems: [BlockItem] = []
    @Published var isBlocking: Bool = false

    func addDomain(_ domain: String) {
        let item = BlockItem(domain: domain.lowercased())
        blockedItems.append(item)
    }

    func removeDomain(at offsets: IndexSet) {
        blockedItems.remove(atOffsets: offsets)
    }

    func toggleDomain(id: UUID) {
        if let index = blockedItems.firstIndex(where: { $0.id == id }) {
            blockedItems[index].isEnabled.toggle()
        }
    }
}
```

### Step 3: Build Main View

Update `Views/MainView.swift`:

```swift
import SwiftUI

struct MainView: View {
    @StateObject private var manager = BlockListManager()
    @State private var newDomain: String = ""

    var body: some View {
        VStack(spacing: 20) {
            Text("FocusDragon")
                .font(.largeTitle)
                .fontWeight(.bold)

            // Add domain section
            HStack {
                TextField("Enter domain (e.g., youtube.com)", text: $newDomain)
                    .textFieldStyle(.roundedBorder)

                Button("Add") {
                    guard !newDomain.isEmpty else { return }
                    manager.addDomain(newDomain)
                    newDomain = ""
                }
                .buttonStyle(.borderedProminent)
            }
            .padding(.horizontal)

            // Block list
            List {
                ForEach(manager.blockedItems) { item in
                    HStack {
                        Text(item.domain)
                        Spacer()
                        Toggle("", isOn: binding(for: item))
                    }
                }
                .onDelete(perform: manager.removeDomain)
            }
            .frame(minHeight: 200)

            // Control buttons
            HStack(spacing: 20) {
                Button(manager.isBlocking ? "Stop Block" : "Start Block") {
                    toggleBlocking()
                }
                .buttonStyle(.borderedProminent)
                .tint(manager.isBlocking ? .red : .green)
            }
            .padding()
        }
        .frame(minWidth: 500, minHeight: 400)
        .padding()
    }

    private func binding(for item: BlockItem) -> Binding<Bool> {
        Binding(
            get: { item.isEnabled },
            set: { _ in manager.toggleDomain(id: item.id) }
        )
    }

    private func toggleBlocking() {
        manager.isBlocking.toggle()
        // Will connect to HostsFileManager in next section
    }
}
```

### Step 4: Update App Entry Point

Update `App/FocusDragonApp.swift`:

```swift
import SwiftUI

@main
struct FocusDragonApp: App {
    var body: some Scene {
        WindowGroup {
            MainView()
        }
    }
}
```

## Deliverables

- Working SwiftUI interface
- Can add/remove domains from list
- Toggle buttons present (not yet functional)
- Clean, native macOS appearance

## Testing Criteria

✅ App launches and displays main window
✅ Can type domain in text field
✅ "Add" button adds domain to list
✅ Can delete domains by swiping or using delete key
✅ Toggle switches work for each domain
✅ "Start Block" / "Stop Block" button toggles state

## Success Criteria

- Interface looks clean and professional
- No crashes when adding/removing domains
- List updates immediately when items change

## Estimated Time

1-2 hours
